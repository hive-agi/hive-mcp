{:paths ["src" "resources"]

 :deps {org.clojure/clojure {:mvn/version "1.12.1"}
        org.clojure/data.json {:mvn/version "2.5.1"}
        org.clojure/core.async {:mvn/version "1.7.701"}

        ;; MCP SDK - using local fork with async handler fix
        ;; Original: https://github.com/unravel-team/mcp-clojure-sdk.git
        ;; Fix: p/promise â†’ p/future + discarding-stdout in jsonrpc4clj
        io.modelcontextprotocol/mcp-clojure-sdk
        {:local/root "mcp-clojure-sdk"}

        ;; nREPL client support
        nrepl/bencode {:mvn/version "1.2.0"}

        ;; Aleph for robust async TCP/networking (replaces custom sockets)
        aleph/aleph {:mvn/version "0.9.3"}
        manifold/manifold {:mvn/version "0.5.0"}

        ;; Logic programming for swarm hivemind coordination
        org.clojure/core.logic {:mvn/version "1.1.1"}

        ;; Datascript for in-memory graph storage (GraphStore backend)
        datascript/datascript {:mvn/version "1.7.3"}

        ;; Logging - Timbre with SLF4J bridge
        com.taoensso/timbre {:mvn/version "6.8.0"}
        com.fzakaria/slf4j-timbre {:mvn/version "0.4.1"}

        ;; Schema validation for org-clj
        metosin/malli {:mvn/version "0.16.4"}

        ;; Chroma vector database client for semantic memory search
        ;; Using local fork with v2 API support (pending upstream PR)
        io.github.levand/clojure-chroma-client
        {:local/root "clojure-chroma-client"}

        ;; for openrouter integration 
        clj-http/clj-http {:mvn/version "3.13.1"}

        ;; D-Bus client for native desktop notifications
        com.lambdaisland/dbus-client {:mvn/version "0.2.15"}

        ;; Development - hot reload and tracing
        org.clojure/tools.trace {:mvn/version "0.9.0"}
        io.github.tonsky/clj-reload {:mvn/version "1.0.0"}

        ;; clj-kondo for code analysis (call graphs, linting)
        clj-kondo/clj-kondo {:mvn/version "2026.01.12"}

        ;; hive-events - re-frame inspired event system for JVM
        ;; Git submodule for local development
        io.github.hive/events {:local/root "hive-events"}}

 :aliases
 {:mcp
  {:exec-fn hive-mcp.server/start!
   :exec-args {}
   :extra-deps {nrepl/nrepl {:mvn/version "1.3.1"}
                cider/cider-nrepl {:mvn/version "0.58.0"}}}

  :dev
  {:extra-paths ["dev" "test"]
   :extra-deps {nrepl/nrepl {:mvn/version "1.3.1"}
                cider/cider-nrepl {:mvn/version "0.58.0"}
                refactor-nrepl/refactor-nrepl {:mvn/version "3.11.0"}}}

  :nrepl
  {:extra-paths ["dev" "test"]
   :extra-deps {nrepl/nrepl {:mvn/version "1.3.1"}
                cider/cider-nrepl {:mvn/version "0.58.0"}
                refactor-nrepl/refactor-nrepl {:mvn/version "3.11.0"}}
   :main-opts ["-m" "nrepl.cmdline"
               "--port" "7910"
               "--middleware" "[cider.nrepl/cider-middleware,refactor-nrepl.middleware/wrap-refactor]"]}

  :test
  {:extra-paths ["test"]
   :extra-deps {io.github.cognitect-labs/test-runner
                {:git/tag "v0.5.1" :git/sha "dfb30dd"}
                ;; Generative testing for spec validation
                org.clojure/test.check {:mvn/version "1.1.1"}}
   :main-opts ["-m" "cognitect.test-runner"]}

  ;; CI-friendly: Run only unit tests (excludes tests requiring Emacs)
  :test-unit
  {:extra-paths ["test"]
   :extra-deps {io.github.cognitect-labs/test-runner
                {:git/tag "v0.5.1" :git/sha "dfb30dd"}}
   :main-opts ["-m" "cognitect.test-runner" "-e" ":integration"]
   :exec-fn cognitect.test-runner.api/test
   :exec-args {:excludes [:integration]}}

  ;; Run only integration tests (requires Emacs with emacs-mcp loaded)
  :test-integration
  {:extra-paths ["test"]
   :extra-deps {io.github.cognitect-labs/test-runner
                {:git/tag "v0.5.1" :git/sha "dfb30dd"}}
   :main-opts ["-m" "cognitect.test-runner" "-i" ":integration"]
   :exec-fn cognitect.test-runner.api/test
   :exec-args {:includes [:integration]}}}}
